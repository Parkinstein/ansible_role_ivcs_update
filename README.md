# ansible_role_ivcs_update
# Описание
Ansible роль для полностью автоматического обновления конфигурации серверов IVCS в кластере active-standvy, 2 головы и отдельно медиа сервера.
# Применение
Клонировать репозиторий

Изменить файл run-ivcs-update-example.yml - вставить ссылки на media и main ISO

Изменить файл hosts.yml - вписать IP адрес MAIN (HEAD) и MEDIA групп серверов, если используется аккаунт, отличный от admin - изменить.
# Запуск
ansible-playbook -i hosts.yml run-ivcs-update-example.yml -k -K

Указать пароль учетной записи с правами sudo и ssh для серверов
# Что делает роль
1. Проверка необходимости обновления
2. Скачивание образов media и main на корректные группы серверов
3. Обновления медиа-сервров с перезагрузкой, проверка корректности версии  после обновления
4. Обновление основного main-сервера, вывод его из кластера, проверка переезда БД на 2 сервер MAIN
5. Перезагрузка 1 сервера MAIN, ввод еuj ксластер, проверка статуса БД - HOTSNADBY
6. Повторение действия для 2 сервера MAIN.
7. Проверка статуса MASTER у БД для 1 MAIN сервера, очистка старых снапшотов БД.
